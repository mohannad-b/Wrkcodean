### Flow 31: Create Task (System Auto-Generated)

**Trigger**: System detects missing items / validation rules and auto-creates tasks

**Flow Diagram**:
```
System detects missing items or validation failures:
    - Missing credentials for required integrations
    - Blueprint validation errors
    - Missing required fields
    - Build checklist items not completed
    ↓
System auto-generates tasks:
    - context_type = 'project' or 'automation_version'
    - context_id = project.id or automation_version.id
    - kind = 'build_checklist' or 'general_todo'
    - title = auto-generated based on missing item
    - status = 'pending'
    - priority = determined by system (e.g., 'high' for blocking items)
    ↓
Validate context exists (project/automation_version)
    ↓
Create task record
    ↓
If kind = 'build_checklist' and context_type = 'project':
    Recalculate project.checklist_progress
    ↓
If assignee specified:
    Send notification to assignee
    ↓
If due_date specified and < 7 days:
    Schedule reminder notification
    ↓
Return task
```

**API Endpoints**:
- `POST /v1/tasks` - Create task
- `GET /v1/tasks` - List tasks (filtered by context, assignee, status)
- `PATCH /v1/tasks/{id}/status` - Update task status

**Database Changes**:
- Insert into `tasks` (tenant_id, context_type, context_id, kind, title, description, status='pending', assignee_id, due_date, priority)
- Update `projects` (checklist_progress) if build_checklist task

**Note**: `checklist_progress` on projects is calculated as: percentage of tasks with `context_type='project'` and `kind='build_checklist'` that have `status='complete'`.

**Important**: The tasks described in this flow are auto-generated by the system based on missing items / validation rules, not manually entered by the user. System detects missing items and auto-creates tasks in the project/task list.

**Notifications**:
- **Email**: Task assigned notification (template: `task_assigned`)
- **In-app**: Notification to assignee
- **Email**: Task due reminder (template: `task_due_reminder`, scheduled)

**Exceptions**:
- **Invalid context**: Return 404
- **Invalid assignee**: Return 400
- **Missing required fields**: Return 400

**Manual Intervention**: None

---
